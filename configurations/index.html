<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Configurations - pipen</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="//use.fontawesome.com/releases/v5.8.1/css/all.css" rel="stylesheet" />
        <link href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css" rel="stylesheet" />
        <link href="../css/mkapi-common.css" rel="stylesheet" />
        <link href="../assets/style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Configurations";
        var mkdocs_page_input_path = "configurations.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.configure({ ignoreUnescapedHTML: true }); hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../rtd-logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="nav-scrollable-wrapper">
      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Introduction</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tutorials/beginner/">Beginner Tutorial</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../defining-proc/">Defining a process</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../running/">Defining and running a pipeline</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">How-to Guides</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../templating/">Templating</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../channels/">Channels</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../input-output/">Input and output</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../script/">Script</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../caching/">Caching</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud/">Cloud support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../error/">Error handling</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Configurations</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../plugin/">Plugins</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scheduler/">Scheduler</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../proc-group/">Process group</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cli/">Command line interface</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">pipen</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen/">pipen</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.pluginmgr/">pipen.pluginmgr</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.utils/">pipen.utils</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.proc/">pipen.proc</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.version/">pipen.version</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.job/">pipen.job</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.scheduler/">pipen.scheduler</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.exceptions/">pipen.exceptions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.pipen/">pipen.pipen</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.channel/">pipen.channel</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.progressbar/">pipen.progressbar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.template/">pipen.template</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.procgroup/">pipen.procgroup</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.defaults/">pipen.defaults</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">pipen.cli</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.cli/">pipen.cli</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.cli.profile/">pipen.cli.profile</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.cli.version/">pipen.cli.version</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.cli.help/">pipen.cli.help</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api/pipen.cli.plugins/">pipen.cli.plugins</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../examples/">Examples</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CHANGELOG/">Change Log</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING/">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../glossary/">Glossary</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Explanation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a>
                  </li>
              </ul>
      </div>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">pipen</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">How-to Guides</li>
      <li class="breadcrumb-item active">Configurations</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/pwwang/pipen/blob/master/docs/configurations.md">Edit on pwwang/pipen</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h3 id="configuration-items">Configuration items<a class="headerlink" href="#configuration-items" title="Permanent link">&para;</a></h3>
<p>There are two levels of configuration items in <code>pipen</code>: pipeline level and process level.</p>
<p>There are only 3 configuration items at pipeline level:</p>
<ul>
<li><code>loglevel</code>: The logging level for the logger (Default: <code>"info"</code>)</li>
<li><code>workdir</code>: Where the metadata and intermediate files are saved for the pipeline (Default: <code>./.pipen</code>)</li>
<li><code>plugins</code>: The plugins to be enabled or disabled for the pipeline</li>
</ul>
<p>These items cannot be set or changed at process level.</p>
<p>Following items are at process level. They can be set changed at process level so that they can be process-specific. You may also see some of the configuration items introduced <a href="../defining-proc/">here</a></p>
<ul>
<li><code>cache</code>: Should we detect whether the jobs are cached? See also <a href="../caching/">here</a></li>
<li><code>dirsig</code>: When checking the signature for caching, whether should we walk through the content of the directory? This is sometimes time-consuming if the directory is big.</li>
<li><code>error_strategy</code>: How to deal with the errors: retry, ignore or halt. See also <a href="../error/">here</a></li>
<li><code>num_retries</code>: How many times to retry to jobs once error occurs.</li>
<li><code>template</code>: efine the template engine to use. See also <a href="../templating/">here</a></li>
<li><code>template_opts</code>: Options to initialize the template engine (will inherit from pipeline level)</li>
<li><code>forks</code>: How many jobs to run simultaneously?</li>
<li><code>lang</code>: The language for the script to run. See also <a href="../script/">here</a></li>
<li><code>plugin_opts</code>: Options for process-level plugins, will inherit from pipeline level</li>
<li><code>scheduler</code>: The scheduler to run the jobs</li>
<li><code>scheduler_opts</code>: The options for the scheduler, will inherit from pipeline level</li>
<li><code>submission_batch</code>: How many jobs to be submited simultaneously</li>
</ul>
<h3 id="configuration-priorities">Configuration priorities<a class="headerlink" href="#configuration-priorities" title="Permanent link">&para;</a></h3>
<p>There are different places to set values for the configuration items (priorities from low to high):</p>
<ul>
<li>
<p>The configuration files (priorities from low to high):</p>
</li>
<li>
<p><code>~/.pipen.toml</code></p>
</li>
<li><code>./.pipen.toml</code></li>
<li><code>PIPEN.osenv</code></li>
</ul>
<p>See <a href="https://github.com/pwwang/python-simpleconf#loading-configurations">here</a> for how the configuration files are loaded.
  <code>pipen</code> uses <code>TOML</code> as configuration language, see <a href="https://github.com/toml-lang/toml">here</a> for more information about <code>toml</code> format.</p>
<ul>
<li>The arguments of <code>Pipen</code> constructor</li>
<li>The process definition</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The configurations from configuration files are with profiles. If the same profile name appears in multiple configuration files, the items will be inherited from the lower-priority files.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Special note for <code>lang</code>.</p>
<p>If it is not set at process level, and there are shebang in the script, whatever you specified at pipeline level (including in the configuration files), it will be ignored and the interpreter in the shebang will be used.</p>
<p>See also <a href="../script/">script</a></p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you have nothing set at <code>Pipen</code> constructor or process definition for a configuration item, the <code>PIPEN.osenv</code> is useful to use a different value than the one set in other configuration files. For example, to disable cache for all processes:</p>
<div class="highlight"><pre><span></span><code>PIPEN_DEFAULT_cache=0 python ./pipeline.py ...
</code></pre></div>
</div>
<h3 id="profiles">Profiles<a class="headerlink" href="#profiles" title="Permanent link">&para;</a></h3>
<p>You can have different profiles in configuration files:</p>
<p><code>~/.pipen.toml</code>
<div class="highlight"><pre><span></span><code><span class="k">[default]</span>
<span class="n">scheduler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;local&quot;</span>

<span class="k">[sge]</span>
<span class="n">scheduler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;sge&quot;</span>

<span class="k">[sge.schduler_opts]</span>
<span class="n">sge_q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1-day&quot;</span>
</code></pre></div></p>
<p>To use the <code>sge</code> profile:</p>
<div class="highlight"><pre><span></span><code><span class="n">Pipen</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="s2">&quot;sge&quot;</span><span class="p">)</span>
</code></pre></div>
<p>You can also have a configuration in current directory:</p>
<p><code>./.pipen.toml</code>
<div class="highlight"><pre><span></span><code><span class="k">[sge.scheduler_opts]</span>
<span class="n">sge_q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;7-days&quot;</span>
</code></pre></div></p>
<p>Then the queue to run the jobs will be <code>7-days</code>. Note that we didn't specify the <code>scheduler</code> in <code>./.pipen.toml</code>, which is inherited from <code>~/.pipen.toml</code>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../error/" class="btn btn-neutral float-left" title="Error handling"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../plugin/" class="btn btn-neutral float-right" title="Plugins">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  <div class="footer-notes">
    <a href="https://github.com/pwwang/pipen" title="Open repository in GitHub">Github Repo</a>
    <div class="footer-sep"></div>Built with <a href="https://www.mkdocs.org/">MkDocs</a> using theme <a href="https://github.com/pwwang/mkdocs-rtd">mkdocs-rtd</a>.
  </div>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../error/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../plugin/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
    <script src="../js/version-select.js"></script>
      <script src="../js/mkapi.js"></script>
      <script src="../assets/script.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
